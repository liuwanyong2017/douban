# 豆瓣电影移动端
    基于豆瓣电影的一个免费的接口，做的手机端的电影排行和简介的网页。
# 注意，由于是https的协议的页面，发送的请求可能会被浏览器默认阻止，浏览页面的时候，要在浏览器的搜索栏右端，点击同意运行脚本，否则看不到页面的。
# 区块和功能
    整个区块分为两个区块，main和footer。footer是三个类型的切换按钮,main是展示区域。点击那个按钮，对应的类型或者功能区就展示在main里了。每个条目展示都包含着跳转的链接，点一下就跳转到豆瓣官网的对应解说了。
- top250
    这个区块是默认是展示区块，可以展示250条目电影的信息，当然初始化只展示20个，为了性能，应用了懒加载的思想，ajax发送请求每次都是20条，滚动到页面底部，就会触发事件，再发送请求，接收数据，渲染DOM。
- 北美排行
    这个区块的数据很少，一次就可以得到，渲染也不费事，所以，初始化的时候，就完全得到了，功能比较单一，展示而已。
- 搜索
    这个区块应用了类似于top250的功能，一样的懒加载，获取数据，只不过豆瓣端的接口问题，搜索的功能不稳定，每次发来的数据数量随机。
- 细节
    发送请求有个loading状态的动画，接收的数据值为0了，到页面底部了，有提示。发送ajax太频繁，加了个锁。
# 分析
    这个页面很简单，初步实现也不麻烦，麻烦的是，里面的区块以及功能太相似，互相之间又有联系，这说明一个问题：这个页面可以写的很漂亮的，我是说代码写的很漂亮。一样用了面向对象，js封装，以及事件的发布订阅模式。
    做手机端的话，跟桌面还真不一样，感觉比桌面端简单多了，我在这里只是说我见识少，不过确实如此。直接把宽度设为100%了，跟桌面端设着宽度而高度自适应完全反了。
    源码是上面的index文件。一个类型写了一个对象，再对footer写了一个app对象，作为整个页面的控制中心，初始化直接app.init()，就可以了。
# 问题和反思 
    数据处理，发送ajax再渲染DOM之类的不算什么。
    各个功能比较相似，互相好像还有联系，那就要分析判断了，最好有个总控制器，去分情况执行相应的。
     刚开始的滚动懒加载事件，我是分别给top250和搜索加上了，代码何其相似，当时我的尴尬症就犯了，相似的代码就要写一遍啊！不过，当时的思路还没有完善，只是刚完成了各部分封装，就开始运行了。结果报错！！！懒加载报错，命明没有到底部，判断到了底部了。我就调试，输出判断语句的值，值没有错啊！！很蒙。然后就看那代码，和调试的问题出处，刚开始以为是自己的判断逻辑出错了，但是！我没有！继续看错误，看代码，是哪呢？又调试了，突然发现输出端多了输出结果了，我脑子灵光一闪，会不会是滚动触发事件影响了top250同时影响了搜索？心里觉得想到点子上了，因为滚动事件绑定在它们共同的父容器上了。越看代码越有问题。怎么解决呢？正好看着这串重复出现的代码心烦，我就想绑在app上，让app去分情况，做事件的发布订阅模式，发送自定义事件，其他端监听完成懒加载。
     第一，互不影响；第二逻辑清晰；第三代码简单。
# 技术栈
css3,javaScript,jQuery,js封装，ajax,面向对象编程。
[项目地址]()
